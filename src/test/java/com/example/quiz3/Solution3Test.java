package com.example.quiz3;

import org.junit.Test;
import org.junit.Assert;

public class Solution3Test {
    private final String SEP = ",";

    @Test
    public void test1() {

        int[] arr = {28, 79, 91};

        Solution3 pq = new Solution3(arr.length);
        for(int i : arr){
            pq.insert(i);
        }

        int[] expects = {91, 79, 28};
        for(int i = 0; i < arr.length; i++) Assert.assertEquals(expects[i], pq.delMax());
    }

    @Test
    public void test2() {

        int[] arr = {91, 28, 79, 10, 16, 83, 13, 7, 44, 39, 70, 92, 6, 31};

        Solution3 pq = new Solution3(arr.length);
        for(int i : arr){
            pq.insert(i);
        }

        StringBuilder sb = new StringBuilder();
        while (!pq.isEmpty()){
            sb.append(pq.delMax()).append(SEP);
        }
        sb.deleteCharAt(sb.length() - 1);

        String expect = "92,91,83,79,70,44,39,31,28,16,13,10,7,6";
        Assert.assertEquals(expect, sb.toString());
    }

    @Test
    public void test3(){
        int[] arr = {28, 53, 36, 66, 78, 48, 15, 28, 98, 54, 85, 31, 43, 92, 65, 67};

        Solution3 pq = new Solution3(arr.length);
        for(int i : arr){
            pq.insert(i);
        }

        int index = 1;
        int[] res = pq.getPq();
        while(index * 2 + 1 < pq.size()){
            Assert.assertTrue(res[index] >= res[index * 2] && res[index] >= res[index * 2 + 1]);
            index++;
        }

        for(int i = 0; i < pq.size() / 2; i++) pq.delMax();

        index = 1;
        while(index * 2 + 1 < pq.size()){
            Assert.assertTrue(res[index] > res[index * 2] && res[index] > res[index * 2 + 1]);
            index++;
        }
    }

    @Test
    public void test4() {
        int[] arr = {91, 28, 79, 10, 16, 83, 13, 7, 44, 39, 70, 92, 6, 31};

        Solution3 pq = new Solution3(arr.length);
        for(int i = 0; i < arr.length; i++){
            if(i % 2 == 0) pq.insert(arr[i]);
        }

        StringBuilder sb = new StringBuilder();
        while (!pq.isEmpty()){
            sb.append(pq.delMax()).append(SEP);
        }
        sb.deleteCharAt(sb.length() - 1);
        String expect = "91,79,70,44,16,13,6";

        Assert.assertEquals(expect, sb.toString());

        for(int i = 0; i < arr.length; i++){
            if(i % 2 == 1) pq.insert(arr[i]);
        }

        sb = new StringBuilder();
        while (!pq.isEmpty()){
            sb.append(pq.delMax()).append(SEP);
        }
        sb.deleteCharAt(sb.length() - 1);
        expect = "92,83,39,31,28,10,7";

        Assert.assertEquals(expect, sb.toString());
    }

    @Test
    public void test5() {
        int[] arr = {307, 7429, 1459, 7940, 9883, 4219, 6750, 3286, 5410, 8589, 3481, 3175, 5597, 4379, 2307, 7378, 7564, 7333, 2132, 9481, 7963, 1938, 574, 9379, 9748, 4176, 6827, 5776, 3218, 6009, 4470, 5818, 2945, 5951, 7142, 5723, 7121, 2372, 3252, 3221, 3770, 8552, 5421, 2930, 3177, 6159, 6659, 2376, 6024, 7934, 7855, 1864, 5131, 7170, 737, 2196, 7847, 6382, 4312, 1467, 589, 6431, 8556, 6610, 3908, 5373, 696, 48, 5173, 288, 3558, 1734, 3696, 8140, 2371, 8681, 5083, 1643, 9025, 4653, 8731, 4166, 4779, 5312, 2379, 2976, 1315, 9585, 825, 6526, 7880, 8091, 9056, 8887, 4211, 9298, 6704, 3348, 7920, 120, 1898, 4563, 1161, 3756, 7879, 6670, 8046, 672, 9737, 8275, 5729, 3909, 553, 9120, 1694, 1653, 2670, 7534, 5944, 5933, 9359, 2294, 8703, 3717, 4016, 3876, 7773, 2253, 441, 1527, 5599, 5094, 3221, 7361, 8865, 6091, 5893, 7202, 642, 2810, 5796, 3387, 5175, 594, 9606, 3681, 6699, 4442, 8185, 5425, 644, 2748, 3758, 2554, 5249, 8860, 2721, 267, 5775, 7577, 9619, 1690, 5451, 5775, 4393, 8110, 322, 6391, 6605, 1706, 8404, 3740, 2242, 9911, 2854, 1994, 54, 3100, 3463, 6468, 8112, 605, 3051, 2354, 9624, 7149, 1859, 310, 2070, 5265, 4429, 6825, 9858, 9362, 2743, 7911, 4107, 9374, 5119, 8852, 4435, 876, 4646, 3145, 9335, 9771, 1716, 287, 3517, 3862, 8613, 7063, 4406, 8933, 6800, 8275, 6770, 4003, 9192, 965, 6435, 7688, 5259, 9762, 8554, 1890, 6023, 5394, 4782, 5205, 5213, 9270, 3547, 3100, 1918, 8070, 9574, 7850, 6627, 5623, 1727, 8626, 6553, 2118, 4895, 6671, 8424, 9540, 9425, 7249, 9444, 3309, 5325, 9909, 1276, 6198, 2415, 2255, 7072, 4243, 9350, 8951, 4096, 466, 1417, 8077, 80, 8935, 6708, 3770, 4199, 4821, 624, 3220, 8119, 7430, 16, 542, 3047, 3559, 7799, 7258, 8155, 9971, 6616, 9452, 5781, 4379, 4389, 44, 1957, 4606, 8809, 4487, 9068, 715, 4673, 547, 6350, 3680, 2164, 7885, 5894, 1437, 292, 8193, 9491, 6634, 7581, 9989, 6240, 7394, 2714, 3459, 9842, 7787, 2327, 7489, 8058, 2579, 1120, 3566, 4074, 9897, 2489, 1499, 8949, 7012, 6327, 7715, 2926, 6324, 3995, 8616, 2, 4163, 8911, 4988, 354, 9768, 1305, 1946, 4681, 3944, 9004, 9999, 9276, 8953, 7262, 4295, 5215, 9012, 2629, 2904, 9236, 3942, 170, 9589, 7726, 4180, 7855, 1248, 84, 2584, 8652, 480, 9744, 3884, 9973, 9514, 423, 2642, 7368, 2383, 7428, 3005, 6451, 1490, 6589, 1216, 8434, 4180, 8343, 9537, 1446, 3038, 4630, 6218, 7729, 4682, 3516, 6908, 1853, 4047, 5090, 9087, 5404, 6151, 8356, 11, 5274, 3982, 9815, 4268, 8255, 5785, 5190, 7126, 1250, 2417, 8970, 3269, 1687, 2091, 6584, 6382, 6808, 741, 8756, 5096, 8273, 1422, 5347, 1297, 3189, 2403, 6734, 1406, 9807, 50, 2994, 2643, 1987, 6957, 9668, 6859, 290, 1404, 1155, 565, 5132, 3103, 2534, 5531, 2064, 1455, 3620, 896, 8303, 6944, 2658, 9173, 463, 4342, 8902, 1224, 7899, 8336, 1755, 2985, 5352, 7029, 8462, 490, 3874, 9913, 3780, 7523, 9140, 1084, 2382, 3056, 5847, 4752, 9845, 2615, 3138, 3574, 8560, 5801, 6335, 9235, 3893, 7429, 5967, 3140, 5499, 7715, 707, 3803, 9853, 3828, 5115, 5156, 2459, 2723, 108, 9305, 1435, 648, 5498, 8461, 9245, 3961, 8934, 2809, 9499, 6461, 9952, 5794, 7359, 3935, 3933, 5363, 4495, 7595, 7747, 9436, 964, 1400, 1106, 487, 2361, 9138, 5101, 5490, 5934, 1187, 6342, 1486, 3131, 4813, 6023, 9603, 8130, 9350, 4508, 2222, 5821, 8577, 4703, 3688, 4983, 8373, 3483, 7684, 7223, 6060, 4658, 1412, 1398, 8906, 8058, 2281, 306, 6776, 3122, 2309, 5211, 1004, 1746, 7614, 90, 391, 5280, 2450, 5842, 3114, 6287, 4546, 8862, 7414, 2386, 2140, 3642, 1871, 6703, 3209, 2014, 444, 7934, 1551, 3301, 4093, 6096, 7124, 5324, 3849, 6669, 8560, 1797, 723, 1829, 7885, 427, 7897, 8472, 1214, 9968, 1129, 1970, 7081, 7219, 4848, 7294, 4082, 2589, 273, 1291, 950, 4506, 9246, 3868, 1457, 9764, 533, 3560, 6940, 6315, 6586, 3490, 5286, 7618, 861, 7220, 4798, 1811, 7160, 580, 8762, 2, 4744, 3033, 4663, 4798, 6981, 9478, 3550, 4932, 8063, 820, 4863, 174, 9575, 6623, 8013, 7385, 2471, 6823, 8694, 6244, 5695, 1286, 877, 6164, 8205, 8225, 3877, 7956, 888, 9944, 8428, 6314, 5545, 8711, 7137, 4053, 9319, 8543, 8276, 6002, 590, 7791, 441, 8638, 6538, 9931, 3785, 4646, 6086, 303, 5429, 1850, 1483, 925, 7111, 7184, 6887, 2658, 5303, 2676, 6220, 9191, 1094, 3533, 8642, 8578, 7723, 1275, 8299, 7277, 2824, 3341, 1136, 606, 1496, 7375, 2477, 2582, 8759, 1968, 3829, 4230, 3838, 1745, 1635, 2426, 6665, 8233, 9679, 4025, 2999, 342, 6218, 6021, 4541, 6239, 7094, 9053, 4232, 3893, 3412, 9906, 8685, 2695, 1963, 9383, 2350, 1812, 2450, 1025, 2812, 4986, 5418, 7374, 4644, 254, 1451, 6354, 7543, 3413, 6874, 9212, 8281, 3087, 9331, 4039, 7814, 9059, 5801, 6876, 4956, 8885, 5671, 325, 329, 3877, 1954, 7437, 7522, 3073, 5917, 7411, 3036, 2330, 8, 6588, 3851, 5860, 9574, 5144, 2613, 8966, 106, 4893, 5426, 4418, 574, 9920, 2691, 9215, 2079, 163, 7275, 5089, 7752, 8328, 7262, 8042, 5657, 7827, 7749, 3994, 7379, 7693, 2731, 2034, 4211, 2133, 8824, 8103, 1593, 9025, 535, 1473, 4581, 5074, 3685, 6739, 5261, 6853, 9113, 9685, 1916, 8998, 1883, 4604, 1162, 8784, 8402, 5772, 564, 2191, 4333, 2660, 1448, 8694, 9853, 6919, 1296, 3579, 638, 155, 888, 3632, 8145, 1146, 8941, 7486, 7575, 6358, 805, 2554, 9468, 6714, 6693, 1977, 5261, 7403, 1570, 6928, 4343, 7517, 7671, 9907, 2654, 8802, 4048, 639, 4294, 1437, 689, 6916, 5730, 661, 9239, 5866, 5303, 2181, 1784, 164, 7259, 9568, 8377, 9090, 8848, 6993, 44, 9456, 4951, 3153, 5748, 2812, 994, 5666, 407, 5909, 6699, 5960, 7230, 7839, 4746, 1128, 3260, 6691, 9351, 5720, 4681, 6034, 6476, 9285, 3930, 5946, 6262, 5268, 8030, 6210, 2152, 7424, 4247, 863, 3068, 4354, 2899, 8489, 3815, 7215, 6583, 6248, 3592, 5563, 1063, 1192, 8861, 715, 6900, 2187, 4673, 6616, 6418, 2701, 1142, 9247, 6517, 2675, 6571, 1494, 8280, 5661, 2698, 1721, 3225, 3435, 2737, 4930, 1380, 5979, 714, 8055, 4378, 2176, 1961, 4878, 8062, 3294, 5698, 3051, 2477, 8642, 6405, 4986, 2263, 8415, 6583, 5159, 3918, 7555, 7422, 6602, 7258, 8200, 5912, 3377, 3190, 2182, 5353, 134, 1563, 8917, 2847, 4224, 1350, 8336, 7603, 6069, 8473, 918, 655, 7644, 7259,};

        Solution3 pq = new Solution3(arr.length);
        for(int i = 0; i < arr.length; i++) pq.insert(arr[i]);

        StringBuilder sb = new StringBuilder();
        while (!pq.isEmpty()){
            sb.append(pq.delMax()).append(SEP);
        }
        sb.deleteCharAt(sb.length() - 1);
        String expect = "9999,9989,9973,9971,9968,9952,9944,9931,9920,9913,9911,9909,9907,9906,9897,9883,9858,9853,9853,9845,9842,9815,9807,9771,9768,9764,9762,9748,9744,9737,9685,9679,9668,9624,9619,9606,9603,9589,9585,9575,9574,9574,9568,9540,9537,9514,9499,9491,9481,9478,9468,9456,9452,9444,9436,9425,9383,9379,9374,9362,9359,9351,9350,9350,9335,9331,9319,9305,9298,9285,9276,9270,9247,9246,9245,9239,9236,9235,9215,9212,9192,9191,9173,9140,9138,9120,9113,9090,9087,9068,9059,9056,9053,9025,9025,9012,9004,8998,8970,8966,8953,8951,8949,8941,8935,8934,8933,8917,8911,8906,8902,8887,8885,8865,8862,8861,8860,8852,8848,8824,8809,8802,8784,8762,8759,8756,8731,8711,8703,8694,8694,8685,8681,8652,8642,8642,8638,8626,8616,8613,8589,8578,8577,8560,8560,8556,8554,8552,8543,8489,8473,8472,8462,8461,8434,8428,8424,8415,8404,8402,8377,8373,8356,8343,8336,8336,8328,8303,8299,8281,8280,8276,8275,8275,8273,8255,8233,8225,8205,8200,8193,8185,8155,8145,8140,8130,8119,8112,8110,8103,8091,8077,8070,8063,8062,8058,8058,8055,8046,8042,8030,8013,7963,7956,7940,7934,7934,7920,7911,7899,7897,7885,7885,7880,7879,7855,7855,7850,7847,7839,7827,7814,7799,7791,7787,7773,7752,7749,7747,7729,7726,7723,7715,7715,7693,7688,7684,7671,7644,7618,7614,7603,7595,7581,7577,7575,7564,7555,7543,7534,7523,7522,7517,7489,7486,7437,7430,7429,7429,7428,7424,7422,7414,7411,7403,7394,7385,7379,7378,7375,7374,7368,7361,7359,7333,7294,7277,7275,7262,7262,7259,7259,7258,7258,7249,7230,7223,7220,7219,7215,7202,7184,7170,7160,7149,7142,7137,7126,7124,7121,7111,7094,7081,7072,7063,7029,7012,6993,6981,6957,6944,6940,6928,6919,6916,6908,6900,6887,6876,6874,6859,6853,6827,6825,6823,6808,6800,6776,6770,6750,6739,6734,6714,6708,6704,6703,6699,6699,6693,6691,6671,6670,6669,6665,6659,6634,6627,6623,6616,6616,6610,6605,6602,6589,6588,6586,6584,6583,6583,6571,6553,6538,6526,6517,6476,6468,6461,6451,6435,6431,6418,6405,6391,6382,6382,6358,6354,6350,6342,6335,6327,6324,6315,6314,6287,6262,6248,6244,6240,6239,6220,6218,6218,6210,6198,6164,6159,6151,6096,6091,6086,6069,6060,6034,6024,6023,6023,6021,6009,6002,5979,5967,5960,5951,5946,5944,5934,5933,5917,5912,5909,5894,5893,5866,5860,5847,5842,5821,5818,5801,5801,5796,5794,5785,5781,5776,5775,5775,5772,5748,5730,5729,5723,5720,5698,5695,5671,5666,5661,5657,5623,5599,5597,5563,5545,5531,5499,5498,5490,5451,5429,5426,5425,5421,5418,5410,5404,5394,5373,5363,5353,5352,5347,5325,5324,5312,5303,5303,5286,5280,5274,5268,5265,5261,5261,5259,5249,5215,5213,5211,5205,5190,5175,5173,5159,5156,5144,5132,5131,5119,5115,5101,5096,5094,5090,5089,5083,5074,4988,4986,4986,4983,4956,4951,4932,4930,4895,4893,4878,4863,4848,4821,4813,4798,4798,4782,4779,4752,4746,4744,4703,4682,4681,4681,4673,4673,4663,4658,4653,4646,4646,4644,4630,4606,4604,4581,4563,4546,4541,4508,4506,4495,4487,4470,4442,4435,4429,4418,4406,4393,4389,4379,4379,4378,4354,4343,4342,4333,4312,4295,4294,4268,4247,4243,4232,4230,4224,4219,4211,4211,4199,4180,4180,4176,4166,4163,4107,4096,4093,4082,4074,4053,4048,4047,4039,4025,4016,4003,3995,3994,3982,3961,3944,3942,3935,3933,3930,3918,3909,3908,3893,3893,3884,3877,3877,3876,3874,3868,3862,3851,3849,3838,3829,3828,3815,3803,3785,3780,3770,3770,3758,3756,3740,3717,3696,3688,3685,3681,3680,3642,3632,3620,3592,3579,3574,3566,3560,3559,3558,3550,3547,3533,3517,3516,3490,3483,3481,3463,3459,3435,3413,3412,3387,3377,3348,3341,3309,3301,3294,3286,3269,3260,3252,3225,3221,3221,3220,3218,3209,3190,3189,3177,3175,3153,3145,3140,3138,3131,3122,3114,3103,3100,3100,3087,3073,3068,3056,3051,3051,3047,3038,3036,3033,3005,2999,2994,2985,2976,2945,2930,2926,2904,2899,2854,2847,2824,2812,2812,2810,2809,2748,2743,2737,2731,2723,2721,2714,2701,2698,2695,2691,2676,2675,2670,2660,2658,2658,2654,2643,2642,2629,2615,2613,2589,2584,2582,2579,2554,2554,2534,2489,2477,2477,2471,2459,2450,2450,2426,2417,2415,2403,2386,2383,2382,2379,2376,2372,2371,2361,2354,2350,2330,2327,2309,2307,2294,2281,2263,2255,2253,2242,2222,2196,2191,2187,2182,2181,2176,2164,2152,2140,2133,2132,2118,2091,2079,2070,2064,2034,2014,1994,1987,1977,1970,1968,1963,1961,1957,1954,1946,1938,1918,1916,1898,1890,1883,1871,1864,1859,1853,1850,1829,1812,1811,1797,1784,1755,1746,1745,1734,1727,1721,1716,1706,1694,1690,1687,1653,1643,1635,1593,1570,1563,1551,1527,1499,1496,1494,1490,1486,1483,1473,1467,1459,1457,1455,1451,1448,1446,1437,1437,1435,1422,1417,1412,1406,1404,1400,1398,1380,1350,1315,1305,1297,1296,1291,1286,1276,1275,1250,1248,1224,1216,1214,1192,1187,1162,1161,1155,1146,1142,1136,1129,1128,1120,1106,1094,1084,1063,1025,1004,994,965,964,950,925,918,896,888,888,877,876,863,861,825,820,805,741,737,723,715,715,714,707,696,689,672,661,655,648,644,642,639,638,624,606,605,594,590,589,580,574,574,565,564,553,547,542,535,533,490,487,480,466,463,444,441,441,427,423,407,391,354,342,329,325,322,310,307,306,303,292,290,288,287,273,267,254,174,170,164,163,155,134,120,108,106,90,84,80,54,50,48,44,44,16,11,8,2,2";

        Assert.assertEquals(expect, sb.toString());
    }
}
